<html>
  <head>
    <title>ChromeFrame fulltab mode unload event test</title>
    <script type="text/javascript"
        src="chrome_frame_tester_helpers.js"></script>

    <script type="text/javascript">
      var new_window;
      function ValidateUserAgent() {
        if (isRunningInChrome()) {
          window.localStorage.unload_success = 0;
          new_window = window.open("fulltab_before_unload_event_main.html",
                                   "_self");
        }
      }

      function onBeforeUnload() {
        if (isRunningInChrome()) {
          new_window.localStorage.unload_success = 1;
        }
      }
    </script>
  </head>

  <body onLoad="setTimeout(ValidateUserAgent, 100);"
      onbeforeunload="onBeforeUnload();">
    ChromeFrame full tab mode unload event test.
    Validates that page unload events are received in ChromeFrame.
  </body>
</html>
